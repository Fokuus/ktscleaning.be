---
/**
 * * This page is the projects index and displays all the projects in a grid
**/

import BaseLayout from "@layouts/BaseLayout.astro";

import { getCollection } from "astro:content";
import { getImage } from "astro:assets";
import "@styles/projects.less";

import Landing from "@components/Landing.astro";
import ProjectsGrid from "@layouts/ProjectsGrid.astro";

// Get all projects and sort by date (newest first)
const projects = await getCollection("projects");
projects.sort((a, b) => new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf());

// Optimize our landing image and pass it as props to the BaseLayout (for preloading) and Landing (for rendering)
import landingImage from "@assets/images/landing.jpg"; // <-- THE PATH TO THE ASSET YOU WANT TO PRELOAD - The asset must live in src
const optimizedImage = await getImage({ src: landingImage, format: "avif" });
---

<BaseLayout title="Portfolio - KTS Cleaning" description="Bekijk onze portfolio van gespecialiseerde schoonmaakprojecten. Crime scene cleaning, industriÃ«le reiniging en technische ontmanteling uitgevoerd door KTS Cleaning professionals." preloadedImage={optimizedImage}>
	<Landing title="Portfolio" image={optimizedImage} />

	<!-- Display projects in a grid layout -->
	<ProjectsGrid projects={projects} />
	
	
</BaseLayout>
