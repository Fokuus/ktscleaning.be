---
import BaseLayout from "@layouts/BaseLayout.astro";
import client from "@data/client.json";

// Optimize our landing image and pass it as props to the BaseLayout (for preloading)
import landingImage from "@assets/images/landing.jpg" // <-- THE PATH TO THE ASSET YOU WANT TO PRELOAD - The asset must live in src
import { getImage } from "astro:assets";
const optimizedImage = await getImage({src: landingImage, format: 'avif'})
---

<BaseLayout
  title="Contact - KTS Cleaning"
  description="Neem contact op met KTS Cleaning voor gespecialiseerde schoonmaakdiensten. 24/7 beschikbaar voor noodsituaties. Vraag een offerte aan voor crime scene cleaning, industriÃ«le reiniging en meer."
  preloadedImage = {optimizedImage}
>



  <!-- ============================================ -->
  <!--                Contact Form                  -->
  <!-- ============================================ -->

  <section id="cs-contact" style="padding-top: clamp(12.5rem, 16.82vw, 15.25rem);">
    <div class="cs-container">
      <form id="cs-form" name="Contact Form" method="post" action="/bedankt" data-netlify="true" data-netlify-recaptcha="true" netlify-honeypot="bot-field">
        <input type="hidden" name="form-name" value="Contact Form" />
        <p class="hidden">
          <label>
            Donâ€™t fill this out if youâ€™re human: <input name="bot-field" />
          </label>
        </p>
        <div class="cs-content">
          <span class="cs-topper wow fadeInUp" data-wow-delay="0.1s">Contact</span>
          <h2 class="cs-title wow fadeInUp" data-wow-delay="0.2s">Neem Contact Op</h2>
          <p class="cs-text wow fadeInUp" data-wow-delay="0.3s">
            Noodsituatie? Wij zijn 24/7 bereikbaar voor spoedeisende opdrachten. Van crime scene cleaning tot industriÃ«le reiniging - onze gespecialiseerde teams staan klaar om u te helpen. Vraag een vrijblijvende offerte aan.
          </p>
        </div>
        <label class="wow fadeInUp" data-wow-delay="0.4s">
          Naam
          <div class="cs-input-wrapper">
            <input
              required
              type="text"
              id="name"
              name="name"
              placeholder="Uw naam"
              class="smooth-cursor"
            />
          </div>
        </label>
        <label class="wow fadeInUp" data-wow-delay="0.5s">
          E-mail
          <div class="cs-input-wrapper">
            <input
              required
              type="email"
              id="email"
              name="email"
              placeholder="uw.email@voorbeeld.be"
              class="smooth-cursor"
            />
          </div>
        </label>
        <label class="wow fadeInUp" data-wow-delay="0.6s">
          Telefoon
          <div class="cs-phone-wrapper">
            <div class="cs-country-select" data-phone-dropdown>
              <input type="hidden" id="country-code" name="country-code" value="+32" />
              <div class="cs-country-trigger" data-phone-trigger>
                <span class="cs-country-flag">ðŸ‡§ðŸ‡ª</span>
                <span class="cs-country-code" data-phone-text>+32</span>
                <div class="cs-select-arrow">
                  <svg width="12" height="8" viewBox="0 0 12 8" fill="none">
                    <path d="M1 1L6 6L11 1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>
              <div class="cs-country-options" data-phone-options>
                <div class="cs-country-option" data-country-value="+32" data-flag="ðŸ‡§ðŸ‡ª">
                  <span class="cs-country-flag">ðŸ‡§ðŸ‡ª</span>
                  <span>+32 BelgiÃ«</span>
                </div>
                <div class="cs-country-option" data-country-value="+31" data-flag="ðŸ‡³ðŸ‡±">
                  <span class="cs-country-flag">ðŸ‡³ðŸ‡±</span>
                  <span>+31 Nederland</span>
                </div>
                <div class="cs-country-option" data-country-value="+33" data-flag="ðŸ‡«ðŸ‡·">
                  <span class="cs-country-flag">ðŸ‡«ðŸ‡·</span>
                  <span>+33 Frankrijk</span>
                </div>
              </div>
            </div>
            <div class="cs-input-wrapper cs-phone-input">
              <input
                required
                type="tel"
                id="phone"
                name="phone"
                placeholder="412 34 56 78"
                class="smooth-cursor"
                data-phone-input
              />
              <input type="hidden" id="phone-full" name="phone-full" />
            </div>
          </div>
        </label>
                  <label class="wow fadeInUp" data-wow-delay="0.7s">
            Type dienst
            <div class="cs-custom-select" data-dropdown>
              <input type="hidden" id="service" name="service-type" required />
              <div class="cs-select-trigger" data-trigger>
                <span class="cs-select-text" data-text>Selecteer een dienst...</span>
                <div class="cs-select-arrow">
                  <svg width="12" height="8" viewBox="0 0 12 8" fill="none">
                    <path d="M1 1L6 6L11 1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>
              <div class="cs-select-options" data-options>
                <div class="cs-option" data-value="industriele-reiniging">IndustriÃ«le reiniging</div>
                <div class="cs-option" data-value="gespecialiseerde-schoonmaak">Gespecialiseerde schoonmaak</div>
                <div class="cs-option" data-value="crime-scene-cleaning">Crime scene cleaning</div>
                <div class="cs-option" data-value="ontmanteling-cannabisplantage">Ontmanteling cannabisplantage</div>
                <div class="cs-option" data-value="gecontamineerde-voertuigen">Gecontamineerde voertuigen</div>
                <div class="cs-option" data-value="gevangeniscellen">Gevangeniscellen reinigen</div>
                <div class="cs-option" data-value="andere">Andere</div>
              </div>
            </div>
          </label>
        <label class="cs-label-message wow fadeInUp" data-wow-delay="0.8s">
          Bericht
          <div class="cs-input-wrapper">
            <textarea
              required
              name="Message"
              id="message"
              placeholder="Beschrijf de situatie, locatie en gewenste diensten..."
              class="smooth-cursor"></textarea>
          </div>
        </label>
        <div data-netlify-recaptcha="true" class="wow fadeInUp" data-wow-delay="0.9s"></div>
        <button type="submit" class="cs-button-solid wow fadeInUp" data-wow-delay="1.0s">Bericht versturen</button>
      </form>
              <div class="cs-right-section wow fadeInRight" data-wow-delay="0.3s">
        <!--Email-->
        <span class="cs-header wow fadeInUp" data-wow-delay="0.5s">E-mail</span>
        <a class="cs-link wow fadeInUp" data-wow-delay="0.6s" href={`mailto:${client.email}`}>{client.email}</a>
        <!--Phone-->
        <span class="cs-header wow fadeInUp" data-wow-delay="0.7s">Telefoon</span>
        <a class="cs-link wow fadeInUp" data-wow-delay="0.8s" href={`tel:${client.phoneForTel}`}
          >{client.phoneFormatted}</a
        >
        <!--Address-->
        <span class="cs-header wow fadeInUp" data-wow-delay="0.9s">Adres</span>
        <a class="cs-link wow fadeInUp" data-wow-delay="1.0s" href={client.address.mapLink}>
          {client.address.lineOne}
          <br />
          <span class="cs-block">
            {client.address.zip} {client.address.city}
          </span>
        </a>

        <!-- Background Image-->
        <picture class="cs-bg-picture">
          <source
            media="(min-width: 601px)"
            srcset="/public/assets/images/industriele-reiniging-productielijnen.webp"
          />
          <img
            aria-hidden="true"
            decoding="async"
            src="/public/assets/images/industriele-reiniging-productielijnen.webp"
            alt="KTS Cleaning professional team"
            loading="lazy"
            width="2500"
            height="1667"
          />
        </picture>
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  // Enhanced smooth cursor movement
  document.addEventListener('DOMContentLoaded', function() {
    // Prevent validation styling on page load and only show on actual errors
    const allInputs = document.querySelectorAll('input, textarea, select');
    allInputs.forEach(input => {
      // Track if the user has actually entered something (not just focused)
      input.addEventListener('input', function() {
        if (this.value.trim() !== '') {
          this.classList.add('has-content');
        } else {
          this.classList.remove('has-content');
        }
      });
      
      // Only show validation errors if field has content and is invalid
      input.addEventListener('blur', function() {
        if (this.value.trim() !== '' && !this.checkValidity()) {
          this.classList.add('show-validation');
        }
      });
      
      // Clear validation styling when user starts typing
      input.addEventListener('input', function() {
        this.classList.remove('show-validation');
      });
    });

    const smoothInputs = document.querySelectorAll('.smooth-cursor');
    
    smoothInputs.forEach(input => {
      let typingTimer;
      
      // Add smooth cursor movement on input
      input.addEventListener('input', function(e) {
        // Clear previous timer
        clearTimeout(typingTimer);
        
        // Add smooth transition class temporarily
        this.style.transition = 'all 0.1s cubic-bezier(0.4, 0, 0.2, 1)';
        
        // Remove transition after typing stops
        typingTimer = setTimeout(() => {
          this.style.transition = '';
        }, 100);
      });
      
      // Enhance cursor visibility during focus
      input.addEventListener('focus', function() {
        this.style.caretColor = 'var(--primary)';
        
        // Smooth cursor blink
        this.style.animation = 'caret-pulse 1.5s ease-in-out infinite';
      });
      
      input.addEventListener('blur', function() {
        this.style.animation = '';
      });
      
      // Handle cursor position changes smoothly
      input.addEventListener('keydown', function(e) {
        const keyEvent = e as KeyboardEvent;
        // For navigation keys, add smooth transition
        if (['ArrowLeft', 'ArrowRight', 'Home', 'End'].includes(keyEvent.key)) {
          this.style.transition = 'caret-color 0.2s ease';
          setTimeout(() => {
            this.style.transition = '';
          }, 200);
        }
      });
    });

            // Dutch form validation messages
    function setCustomValidationMessages() {
      const nameInput = document.getElementById('name') as HTMLInputElement;
      const emailInput = document.getElementById('email') as HTMLInputElement;
      const phoneInput = document.getElementById('phone') as HTMLInputElement;
      const serviceInput = document.getElementById('service') as HTMLInputElement;
      const messageInput = document.getElementById('message') as HTMLTextAreaElement;

      if (nameInput) {
        nameInput.addEventListener('invalid', function() {
          if (this.validity.valueMissing) {
            this.setCustomValidity('Vul uw naam in');
          } else {
            this.setCustomValidity('');
          }
        });
        nameInput.addEventListener('input', function() {
          this.setCustomValidity('');
        });
      }

      if (emailInput) {
        emailInput.addEventListener('invalid', function() {
          if (this.validity.valueMissing) {
            this.setCustomValidity('Vul uw e-mailadres in');
          } else if (this.validity.typeMismatch) {
            this.setCustomValidity('Vul een geldig e-mailadres in');
          } else {
            this.setCustomValidity('');
          }
        });
        emailInput.addEventListener('input', function() {
          this.setCustomValidity('');
        });
      }

      if (phoneInput) {
        phoneInput.addEventListener('invalid', function() {
          if (this.validity.valueMissing) {
            this.setCustomValidity('Vul uw telefoonnummer in');
          } else {
            this.setCustomValidity('Vul een geldig mobiel telefoonnummer in');
          }
        });
        phoneInput.addEventListener('input', function() {
          this.setCustomValidity('');
        });
      }

      if (serviceInput) {
        serviceInput.addEventListener('invalid', function() {
          if (this.validity.valueMissing) {
            this.setCustomValidity('Selecteer een type dienst');
          } else {
            this.setCustomValidity('');
          }
        });
        serviceInput.addEventListener('change', function() {
          this.setCustomValidity('');
        });
      }

      if (messageInput) {
        messageInput.addEventListener('invalid', function() {
          if (this.validity.valueMissing) {
            this.setCustomValidity('Vul uw bericht in');
          } else {
            this.setCustomValidity('');
          }
        });
        messageInput.addEventListener('input', function() {
          this.setCustomValidity('');
        });
      }
    }

    // Call validation setup
    setCustomValidationMessages();

    // Enhanced form submission handling
    const form = document.getElementById('cs-form') as HTMLFormElement;
    if (form) {
      form.addEventListener('submit', function(e) {
        let hasErrors = false;
        
        // Show validation for all empty required fields
        const requiredInputs = form.querySelectorAll('input[required], textarea[required]');
        requiredInputs.forEach(input => {
          const inputElement = input as HTMLInputElement | HTMLTextAreaElement;
          if (!inputElement.checkValidity()) {
            inputElement.classList.add('show-validation');
            hasErrors = true;
          }
        });
        
        // Check if custom dropdown has a value
        const serviceInput = document.getElementById('service') as HTMLInputElement;
        if (serviceInput && !serviceInput.value) {
          e.preventDefault();
          serviceInput.setCustomValidity('Selecteer een type dienst');
          // Show validation for dropdown trigger
          const dropdownTrigger = serviceInput.closest('.cs-custom-select')?.querySelector('.cs-select-trigger');
          if (dropdownTrigger) {
            dropdownTrigger.classList.add('show-validation');
          }
          hasErrors = true;
        }

        // Validate phone number format
        const phoneInput = document.getElementById('phone') as HTMLInputElement;
        const phoneFullInput = document.getElementById('phone-full') as HTMLInputElement;
        const countryCodeInput = document.getElementById('country-code') as HTMLInputElement;
        
        if (phoneInput && phoneInput.value && countryCodeInput && phoneFullInput) {
          const countryCode = countryCodeInput.value;
          const digits = phoneInput.value.replace(/\D/g, '').replace(/^0+/, '');
          
          let isValid = false;
          let minLength = 0;
          
          if (countryCode === '+32') {
            // Belgian mobile: 9 digits (after removing leading 0)
            minLength = 9;
            isValid = digits.length === 9 && digits.startsWith('4');
          } else if (countryCode === '+31') {
            // Dutch mobile: 9 digits (after removing leading 0)
            minLength = 9;
            isValid = digits.length === 9 && digits.startsWith('6');
          } else if (countryCode === '+33') {
            // French mobile: 10 digits (after removing leading 0)
            minLength = 10;
            isValid = digits.length === 10 && digits.startsWith('6');
          }
          
          if (!isValid || digits.length < minLength) {
            e.preventDefault();
            phoneInput.setCustomValidity('Vul een geldig mobiel telefoonnummer in');
            phoneInput.classList.add('show-validation');
            hasErrors = true;
          } else {
            // Make sure the full phone number is set correctly
            phoneFullInput.value = getFullPhoneNumber(phoneInput.value, countryCode);
          }
        }

        if (hasErrors) {
          e.preventDefault();
          return false;
        }

        // All validation passed - form will submit to /bedankt
        return true;
      });
    }

    // Phone country code dropdown functionality
    const phoneDropdowns = document.querySelectorAll('[data-phone-dropdown]');
    
    phoneDropdowns.forEach(dropdown => {
      const trigger = dropdown.querySelector('[data-phone-trigger]') as HTMLElement;
      const options = dropdown.querySelector('[data-phone-options]') as HTMLElement;
      const hiddenInput = dropdown.querySelector('input[type="hidden"]') as HTMLInputElement;
      const textElement = dropdown.querySelector('[data-phone-text]') as HTMLElement;
      const flagElement = dropdown.querySelector('.cs-country-flag') as HTMLElement;
      const optionElements = dropdown.querySelectorAll('.cs-country-option');
      
      if (!trigger || !options || !hiddenInput || !textElement || !flagElement) return;
      
      // Toggle dropdown
      trigger.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Close other dropdowns
        phoneDropdowns.forEach(otherDropdown => {
          if (otherDropdown !== dropdown) {
            otherDropdown.classList.remove('active');
            const otherOptions = otherDropdown.querySelector('[data-phone-options]');
            if (otherOptions) {
              otherOptions.classList.remove('active');
            }
          }
        });
        
        // Toggle current dropdown
        dropdown.classList.toggle('active');
        options.classList.toggle('active');
      });
      
      // Handle option selection
      optionElements.forEach(option => {
        option.addEventListener('click', function() {
          const value = this.getAttribute('data-country-value');
          const flag = this.getAttribute('data-flag');
          
          if (value && flag) {
            // Update hidden input, display text, and flag
            hiddenInput.value = value;
            textElement.textContent = value;
            flagElement.textContent = flag;
            
            // Update selected state
            optionElements.forEach(opt => opt.classList.remove('selected'));
            this.classList.add('selected');
            
            // Close dropdown
            dropdown.classList.remove('active');
            options.classList.remove('active');
            
            // Update placeholder for phone input
            updatePhonePlaceholder(value);
            
            // Trigger change event
            hiddenInput.dispatchEvent(new Event('change', { bubbles: true }));
          }
        });
      });
    });

    // Phone number formatting functionality
    function formatPhoneNumber(value: string, countryCode: string): string {
      // Remove all non-digits
      const digits = value.replace(/\D/g, '');
      
      // Remove leading zero if present
      const cleanDigits = digits.replace(/^0+/, '');
      
      // Format based on country
      if (countryCode === '+32') {
        // Belgian format: 0476 28 90 78
        if (cleanDigits.length <= 3) return cleanDigits;
        if (cleanDigits.length <= 5) return `${cleanDigits.slice(0, 3)} ${cleanDigits.slice(3)}`;
        if (cleanDigits.length <= 7) return `${cleanDigits.slice(0, 3)} ${cleanDigits.slice(3, 5)} ${cleanDigits.slice(5)}`;
        return `${cleanDigits.slice(0, 3)} ${cleanDigits.slice(3, 5)} ${cleanDigits.slice(5, 7)} ${cleanDigits.slice(7, 9)}`;
      } else if (countryCode === '+31') {
        // Dutch format: similar to Belgian
        if (cleanDigits.length <= 2) return cleanDigits;
        if (cleanDigits.length <= 5) return `${cleanDigits.slice(0, 2)} ${cleanDigits.slice(2)}`;
        if (cleanDigits.length <= 8) return `${cleanDigits.slice(0, 2)} ${cleanDigits.slice(2, 5)} ${cleanDigits.slice(5)}`;
        return `${cleanDigits.slice(0, 2)} ${cleanDigits.slice(2, 5)} ${cleanDigits.slice(5, 8)} ${cleanDigits.slice(8, 9)}`;
      } else if (countryCode === '+33') {
        // French format
        if (cleanDigits.length <= 2) return cleanDigits;
        if (cleanDigits.length <= 4) return `${cleanDigits.slice(0, 2)} ${cleanDigits.slice(2)}`;
        if (cleanDigits.length <= 6) return `${cleanDigits.slice(0, 2)} ${cleanDigits.slice(2, 4)} ${cleanDigits.slice(4)}`;
        if (cleanDigits.length <= 8) return `${cleanDigits.slice(0, 2)} ${cleanDigits.slice(2, 4)} ${cleanDigits.slice(4, 6)} ${cleanDigits.slice(6)}`;
        return `${cleanDigits.slice(0, 2)} ${cleanDigits.slice(2, 4)} ${cleanDigits.slice(4, 6)} ${cleanDigits.slice(6, 8)} ${cleanDigits.slice(8, 10)}`;
      }
      
      return cleanDigits;
    }

    function updatePhonePlaceholder(countryCode: string): void {
      const phoneInput = document.querySelector('[data-phone-input]') as HTMLInputElement;
      if (!phoneInput) return;
      
      if (countryCode === '+32') {
        phoneInput.placeholder = '0476 28 90 78';
      } else if (countryCode === '+31') {
        phoneInput.placeholder = '06 1234 5678';
      } else if (countryCode === '+33') {
        phoneInput.placeholder = '06 12 34 56 78';
      }
    }

    function getFullPhoneNumber(localNumber: string, countryCode: string): string {
      // Remove all formatting and leading zeros
      const digits = localNumber.replace(/\D/g, '').replace(/^0+/, '');
      
      // Return full international format
      return `${countryCode}${digits}`;
    }

    // Phone input formatting
    const phoneInput = document.querySelector('[data-phone-input]') as HTMLInputElement;
    const countryCodeInput = document.getElementById('country-code') as HTMLInputElement;
    const phoneFullInput = document.getElementById('phone-full') as HTMLInputElement;
    
    if (phoneInput && countryCodeInput && phoneFullInput) {
      phoneInput.addEventListener('input', function() {
        const countryCode = countryCodeInput.value;
        const formattedValue = formatPhoneNumber(this.value, countryCode);
        
        // Update display value
        this.value = formattedValue;
        
        // Update hidden full phone number
        phoneFullInput.value = getFullPhoneNumber(formattedValue, countryCode);
        
        // Clear validation styling
        this.classList.remove('show-validation');
      });
    }

    // Custom dropdown functionality
    const customSelects = document.querySelectorAll('[data-dropdown]');
    
    customSelects.forEach(dropdown => {
      const trigger = dropdown.querySelector('[data-trigger]') as HTMLElement;
      const options = dropdown.querySelector('[data-options]') as HTMLElement;
      const hiddenInput = dropdown.querySelector('input[type="hidden"]') as HTMLInputElement;
      const textElement = dropdown.querySelector('[data-text]') as HTMLElement;
      const optionElements = dropdown.querySelectorAll('.cs-option');
      
      if (!trigger || !options || !hiddenInput || !textElement) return;
      
      // Toggle dropdown
      trigger.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Close other dropdowns
        customSelects.forEach(otherDropdown => {
          if (otherDropdown !== dropdown) {
            otherDropdown.classList.remove('active');
            const otherOptions = otherDropdown.querySelector('[data-options]');
            if (otherOptions) {
              otherOptions.classList.remove('active');
            }
          }
        });
        
        // Toggle current dropdown
        dropdown.classList.toggle('active');
        options.classList.toggle('active');
      });
      
      // Handle option selection
      optionElements.forEach(option => {
        option.addEventListener('click', function() {
          const value = this.getAttribute('data-value');
          const text = this.textContent;
          
          if (value && text) {
            // Update hidden input and display text
            hiddenInput.value = value;
            textElement.textContent = text;
            textElement.classList.remove('placeholder');
            
            // Update selected state
            optionElements.forEach(opt => opt.classList.remove('selected'));
            this.classList.add('selected');
            
            // Close dropdown
            dropdown.classList.remove('active');
            options.classList.remove('active');
            
            // Trigger change event for form validation
            hiddenInput.dispatchEvent(new Event('change', { bubbles: true }));
          }
        });
      });
    });
    
    // Close dropdowns when clicking outside
    document.addEventListener('click', function(e) {
      const target = e.target as HTMLElement;
      
      // Close service dropdowns
      if (target && !target.closest('[data-dropdown]')) {
        customSelects.forEach(dropdown => {
          dropdown.classList.remove('active');
          const dropdownOptions = dropdown.querySelector('[data-options]');
          if (dropdownOptions) {
            dropdownOptions.classList.remove('active');
          }
        });
      }
      
      // Close phone dropdowns
      if (target && !target.closest('[data-phone-dropdown]')) {
        phoneDropdowns.forEach(dropdown => {
          dropdown.classList.remove('active');
          const dropdownOptions = dropdown.querySelector('[data-phone-options]');
          if (dropdownOptions) {
            dropdownOptions.classList.remove('active');
          }
        });
      }
    });
  });
</script>

<style lang="less">
  /* PAGE-SPECIFIC STYLES FOR THE CONTACT PAGE */

  /* Pulsating cursor keyframes */
  @keyframes caret-pulse {
    0%, 50% {
      caret-color: var(--primary);
    }
    51%, 100% {
      caret-color: rgba(254, 213, 0, 0.4);
    }
  }

  /* Smooth cursor movement styles */
  .smooth-cursor {
    /* Enable smooth text selection and cursor movement */
    scroll-behavior: smooth;
    /* Smooth font rendering for better cursor visibility */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    
    /* Custom properties for cursor animation */
    --cursor-transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /*-- -------------------------- -->
<---          Contact           -->
<--- -------------------------- -*/

  /* Mobile - 360px */
  @media only screen and (min-width: 0em) {
    :root {
      /* 13px - 16px */
      --topperFontSize: clamp(0.8125rem, 1.6vw, 1rem);
      /* 31px - 49px */
      --headerFontSize: clamp(1.9375rem, 4.5vw, 3.0625rem);
      --bodyFontSize: 1rem;

      /* 60px - 100px top and bottom */
      --sectionPadding: clamp(3.75em, 7.82vw, 6.25em) 1rem;
    }

    #cs-contact {
      font-family: "Roboto", "Arial", sans-serif;
      padding: var(--sectionPadding);

      .cs-container {
        width: 100%;
        /* changes to 1280px at desktop */
        max-width: (800/16rem);
        margin: auto;
      }

      #cs-form {
        width: 100%;
        
        label {
          width: 100%;
          margin-bottom: clamp(1rem, 2vw, 1.5rem);
        }
      }

      .cs-content {
        width: 100%;
      }

      .cs-topper {
        text-align: left;
        /* 8px - 12px */
        margin-bottom: clamp(0.5rem, 1.4vw, 0.75rem);
        /* Improve font rendering */
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
      }

      .cs-title {
        text-align: left;
        max-width: (800/16rem);
        margin: 0 0 (16/16rem) 0;
        /* Improve font rendering */
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
      }

      .cs-text {
        text-align: left;
        /* 500px - 650px */
        max-width: clamp(31.25rem, 40vw, 40.625rem);
        margin: 0 auto 0 0;
        /* 40px - 48px */
        margin-bottom: clamp(2.5rem, 6.3vw, 3rem);
        /* Improve font rendering */
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
        font-weight: 100 !important;
      }

      #cs-form {
        margin-bottom: (40/16rem);
        label {
          font-size: (16/16rem);
          font-weight: 200;
          line-height: 1.5em;
          /* 12px - 20px */
          margin-bottom: clamp(0.75rem, 1.3em, 1.25rem);
          color: var(--headerColor);
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: flex-start;
          width: 100%;
        }

        .cs-label-message {
          /* 32px - 48px */
          margin-bottom: clamp(2rem, 6.3vw, 3rem);
        }

        .cs-input-wrapper {
          position: relative;
          margin-top: (4/16rem);
          width: 100%;
          
          &.cs-phone-input {
            margin-top: 0;
          }
          
          &::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(254, 213, 0, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            z-index: 1;
          }
          
          &:focus-within::before {
            opacity: 1;
          }
        }

        .cs-phone-wrapper {
          display: flex;
          gap: (8/16rem);
          margin-top: (4/16rem);
          width: 100%;
          align-items: flex-start;
        }

        .cs-country-select {
          position: relative;
          width: (120/16rem);
          flex-shrink: 0;
          
          &::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(254, 213, 0, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            z-index: 1;
          }
          
          &.active::before {
            opacity: 1;
          }
        }

        .cs-country-trigger {
          font-size: (16/16rem);
          width: 100%;
          height: (64/16rem);
          box-sizing: border-box;
          padding: 0 (35/16rem) 0 (12/16rem);
          border: 1px solid var(--primary);
          background: rgba(255, 255, 255, 0.05);
          backdrop-filter: blur(10px);
          color: var(--headerColor);
          font-family: inherit;
          font-weight: 200;
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
          position: relative;
          z-index: 2;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: (8/16rem);
          
          &:hover {
            border-color: rgba(254, 213, 0, 0.4);
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-1px);
            box-shadow: 
              0 4px 20px rgba(0, 0, 0, 0.1),
              0 0 0 1px rgba(254, 213, 0, 0.2);
          }
          
          &.show-validation {
            border-color: #ff4444;
            background: rgba(255, 68, 68, 0.05);
          }
          
          .cs-select-arrow {
            position: absolute;
            right: (8/16rem);
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            color: var(--headerColor);
            transition: all 0.3s ease;
            z-index: 3;
            
            svg {
              transition: transform 0.3s ease;
              width: 10px;
              height: 6px;
            }
          }
        }

        .cs-country-flag {
          font-size: (18/16rem);
          line-height: 1;
        }

        .cs-country-code {
          font-size: (14/16rem);
          font-weight: 300;
          color: var(--headerColor);
        }

        .cs-country-options {
          position: absolute;
          top: 100%;
          left: 0;
          right: 0;
          background: rgba(255, 255, 255, 0.95);
          backdrop-filter: blur(20px);
          border: 1px solid var(--primary);
          border-top: none;
          max-height: 200px;
          overflow-y: auto;
          z-index: 1000;
          opacity: 0;
          visibility: hidden;
          transform: translateY(-10px);
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          
          &.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
          }
        }

        .cs-country-option {
          padding: (12/16rem) (12/16rem);
          font-size: (14/16rem);
          color: var(--headerColor);
          cursor: pointer;
          transition: all 0.2s ease;
          font-weight: 200;
          display: flex;
          align-items: center;
          gap: (8/16rem);
          
          &:hover {
            background: rgba(254, 213, 0, 0.1);
            color: var(--headerColor);
          }
          
          &.selected {
            background: white;
            color: var(--headerColor);
            font-weight: 300;
          }
        }

        .cs-country-select.active .cs-country-trigger .cs-select-arrow {
          color: var(--primary);
          
          svg {
            transform: rotate(180deg);
          }
        }

        .cs-phone-input {
          flex: 1;
          
          .cs-input-wrapper {
            margin-top: 0 !important;
          }
        }

        .cs-custom-select {
          position: relative;
          margin-top: (4/16rem);
          width: 100%;
          
          &::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(254, 213, 0, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            z-index: 1;
          }
          
          &.active::before {
            opacity: 1;
          }
        }

        input,
        textarea,
        .cs-select {
          font-size: (16/16rem);
          width: 100%;
          height: (64/16rem);
          /* prevents border & padding from affecting height */
          box-sizing: border-box;
          padding: 0 (20/16rem);
          border: 1px solid var(--primary);
          background: rgba(255, 255, 255, 0.05);
          backdrop-filter: blur(10px);
          color: var(--headerColor);
          font-family: inherit;
          font-weight: 200;
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
          position: relative;
          z-index: 2;
          
          /* Custom pulsating cursor with smooth movement */
          caret-color: var(--primary);
          /* Enhanced cursor smoothing */
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
          text-rendering: optimizeLegibility;
          font-kerning: auto;
          font-variant-ligatures: common-ligatures;
          
          /* Smooth scrolling for long inputs */
          scroll-behavior: smooth;
          
          &::placeholder {
            color: #888;
            font-weight: 200;
            transition: opacity 0.3s ease;
          }

          &:hover {
            border-color: rgba(254, 213, 0, 0.4);
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-1px);
            box-shadow: 
              0 4px 20px rgba(0, 0, 0, 0.1),
              0 0 0 1px rgba(254, 213, 0, 0.2);
          }

          &:focus {
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.1);
            outline: none;
            transform: translateY(-2px);
            animation: caret-pulse 1.5s ease-in-out infinite;
            
            &::placeholder {
              opacity: 0.4;
            }
          }

          &.show-validation:invalid {
            border-color: #ff4444;
            background: rgba(255, 68, 68, 0.05);
          }

          &.show-validation:invalid:focus {
            border-color: #ff4444;
            background: rgba(255, 68, 68, 0.1);
            box-shadow: 
              0 4px 20px rgba(255, 68, 68, 0.1),
              0 0 0 1px rgba(255, 68, 68, 0.2);
          }
        }

        .cs-select-trigger {
          font-size: (16/16rem);
          width: 100%;
          height: (64/16rem);
          box-sizing: border-box;
          padding: 0 (50/16rem) 0 (20/16rem);
          border: 1px solid var(--primary);
          background: rgba(255, 255, 255, 0.05);
          backdrop-filter: blur(10px);
          color: var(--headerColor);
          font-family: inherit;
          font-weight: 200;
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
          position: relative;
          z-index: 2;
          cursor: pointer;
          display: flex;
          align-items: center;
          
          /* Enhanced cursor smoothing */
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
          text-rendering: optimizeLegibility;
          font-kerning: auto;
          font-variant-ligatures: common-ligatures;
          
          &:hover {
            border-color: rgba(254, 213, 0, 0.4);
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-1px);
            box-shadow: 
              0 4px 20px rgba(0, 0, 0, 0.1),
              0 0 0 1px rgba(254, 213, 0, 0.2);
          }
          
          &.show-validation {
            border-color: #ff4444;
            background: rgba(255, 68, 68, 0.05);
          }
        }

        .cs-select-text {
          flex: 1;
          color: var(--headerColor);
          font-weight: 200;
          
          &.placeholder {
            color: #888;
            font-weight: 200;
          }
        }

        .cs-select-options {
          position: absolute;
          top: 100%;
          left: 0;
          right: 0;
          background: rgba(255, 255, 255, 0.95);
          backdrop-filter: blur(20px);
          border: 1px solid var(--primary);
          border-top: none;
          max-height: 200px;
          overflow-y: auto;
          z-index: 1000;
          opacity: 0;
          visibility: hidden;
          transform: translateY(-10px);
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          
          &.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
          }
        }

        .cs-option {
          padding: (12/16rem) (20/16rem);
          font-size: (16/16rem);
          color: var(--headerColor);
          cursor: pointer;
          transition: all 0.2s ease;
          font-weight: 200;
          
          &:hover {
            background: rgba(254, 213, 0, 0.1);
            color: var(--headerColor);
          }
          
          &.selected {
            background: white;
            color: var(--headerColor);
            font-weight: 300;
          }
        }

        .cs-select-arrow {
          position: absolute;
          right: (20/16rem);
          top: 50%;
          transform: translateY(-50%);
          pointer-events: none;
          color: var(--headerColor);
          transition: all 0.3s ease;
          z-index: 3;
          
          svg {
            transition: transform 0.3s ease;
          }
        }

        .cs-custom-select.active .cs-select-arrow {
          color: var(--primary);
          
          svg {
            transform: rotate(180deg);
          }
        }

        textarea {
          min-height: (120/16rem);
          padding-top: (20/16rem);
          padding-bottom: (20/16rem);
          resize: vertical;
          font-family: inherit;
        }

        .cs-button-solid {
          width: 100%;
          border: none;
          background-color: var(--primary);
          color: #000;
          font-weight: 300;
          font-size: 16px;
          padding: 17px 32px;
          margin-top: 2rem;
          cursor: pointer;
          transition: all 0.3s ease;
          text-align: center;
          line-height: 1.2;
          position: relative;
          box-sizing: border-box;
          text-transform: none;
          
          /* notch dimensions */
          --notch-width: 5px;
          --notch-depth: 5px;

          /* clip-path with three centered notches: top, right, bottom */
          clip-path: polygon(
              0% 0%,
              calc(50% - var(--notch-width)) 0%,
              50% var(--notch-depth),
              calc(50% + var(--notch-width)) 0%,
              100% 0%,
              100% calc(50% - var(--notch-width)),
              calc(100% - var(--notch-depth)) 50%,
              100% calc(50% + var(--notch-width)),
              100% 100%,
              calc(50% + var(--notch-width)) 100%,
              50% calc(100% - var(--notch-depth)),
              calc(50% - var(--notch-width)) 100%,
              0% 100%,
              0% 0%
          );
          overflow: hidden;

          &::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            clip-path: inherit;
          }
          
          &:hover {
            background-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            
            &::before {
              opacity: 1;
            }
          }

          &:active {
            transform: translateY(0);
            background-color: #FFC700;
          }
        }
      }

      .cs-right-section {
        height: (320/16rem);
        /* 24px - 40px top & bottom */
        /* 20px - 40px left & right */
        padding: clamp(1.5rem, 3vw, 2.5rem) clamp(1.25rem, 3vw, 2.5rem);
        border-radius: 0;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        align-items: flex-start;
        position: relative;
        /* cuts off corners on img tag */
        overflow: hidden;
        border: 2px solid var(--primary);
      }

      .cs-header {
        /* 16px - 20px */
        font-size: clamp(1rem, 3vw, 1.25rem);
        font-weight: 200;
        line-height: 1.2em;
        margin-bottom: (8/16rem);
        color: var(--bodyTextColorWhite);
        display: block;
      }

      .cs-link {
        /* 16px - 20px */
        font-size: clamp(1rem, 3vw, 1.25rem);
        line-height: 1.2em;
        text-decoration: none;
        margin-bottom: (20/16rem);
        color: var(--bodyTextColorWhite);
        display: block;
        position: relative;
        font-weight: 100;

        &:before {
          /* Animated underline */
          content: "";
          width: 0%;
          height: 2px;
          /* current color of the parent */
          background: currentColor;
          opacity: 1;
          display: block;
          position: absolute;
          bottom: (-2/16rem);
          left: 0;
          transition: width 0.3s;
        }

        &:hover {
          &:before {
            width: 100%;
          }
        }

        &:last-of-type {
          margin-bottom: 0;
        }
      }

      .cs-block {
        /* sends second address line to the bottom on its own line */
        display: block;
      }

      .cs-bg-picture {
        width: 100%;
        height: 100%;
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        z-index: -1;
        transition: transform 0.6s;

        &:before {
          /* background color overlay */
          content: "";
          width: 100%;
          height: 100%;
          background: linear-gradient(
            180deg,
            rgba(0, 0, 0, 0.2) 0%,
            rgba(0, 0, 0, 0.6) 100%
          );
          display: block;
          position: absolute;
          top: 0;
          left: 0;
          z-index: 1;
        }

        img {
          width: 100%;
          height: 100%;
          /* Makes img tag act as a background image */
          object-fit: cover;
          position: absolute;
          top: 0;
          left: 0;
        }
      }
    }
  }

  /* Tablet - 700px */
  @media only screen and (min-width: 43.75em) {
    #cs-contact {
      #cs-form {
        display: block;

        label {
          width: 100%;
        }

        .cs-label-message {
          width: 100%;
        }
      }
    }
  }

  /* Small Desktop - 1024px */
  @media only screen and (min-width: 64em) {
    #cs-contact {
      .cs-container {
        max-width: (1280/16rem);
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: (40/16rem);
      }

      #cs-form {
        width: 65%;
        max-width: none;
        label {
          width: 100%;
        }
      }

      .cs-right-section {
        width: 30%;
        max-width: (350/16rem);
        /* changes to 578px at 1300px wide */
        height: (686/16rem);
        /* prevents flexbox from squishing it */
        flex: none;

        &:hover {
          .cs-bg-picture {
            transform: scale(1.1);
          }
        }
      }

      .cs-block {
        /* goes back to inline so it stays "in line" with the rest of the text */
        display: inline-block;
      }
    }
  }

  /* Small Desktop - 1300px */
  @media only screen and (min-width: 81.25em) {
    #cs-contact {
      #cs-form {
        label {
          width: 100%;
          max-width: none;
        }

        .cs-label-message {
          max-width: 100%;
        }
      }

      .cs-right-section {
        height: (578/16rem);
      }
    }
  }

  /* Dark Mode */
  @media only screen and (min-width: 0em) {
    body.dark-mode {
      #cs-contact {
        .cs-text,
        .cs-title {
          color: var(--bodyTextColorWhite);
        }

        .cs-topper {
          color: var(--primaryLight);
        }

        #cs-form {
          label,
          input,
          textarea {
            color: var(--bodyTextColorWhite);
            background-color: transparent;

            &::placeholder {
              /* lighten up the color of the text by 40%*/
              filter: brightness(1.4);
            }
          }
        }

        .cs-bg-picture {
          background-color: #000;

          img {
            /* lets parent background-color bleed through and darken it */
            opacity: 0.7;
          }
        }
      }
    }
  }
</style>
