<section id="faq-326">
  <div class="cs-container">
    <div class="cs-content">
      <span class="cs-topper">FAQ's</span>
      <h2 class="cs-title">Frequently Asked Questions</h2>
    </div>
    <div class="cs-flex-group">
      <ul class="cs-faq-group">
        <!-- Active class added as default -->
        <li class="cs-faq-item active">
          <button class="cs-button">
            <span class="cs-button-text">
              What is the difference between a lawyer and an attorney?
            </span>
          </button>
          <p class="cs-item-p">
            In the U.S., the terms lawyer and attorney are often used interchangeably. A lawyer provides legal services such as giving legal advice, writing legal documents and providing policy counsel to governments. An attorney, on top of these things also holds a state or regional license to represent clients in a law court.
          </p>
        </li>
        <li class="cs-faq-item">
          <button class="cs-button">
            <span class="cs-button-text">
              How do I get started?
            </span>
          </button>
          <p class="cs-item-p">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sit convallis nunc neque, bibendum pulvinar vitae commodo velit. Proin diam tortor sed malesuada nunc, habitant. Dignissim ipsum porta enim, magna urna, quam. 
          </p>
        </li>
        <li class="cs-faq-item">
          <button class="cs-button">
            <span class="cs-button-text">
              I'm New to the United States and Need an Attorney. Can I Hire a Stitch Lawyer Instead?
            </span>
          </button>
          <p class="cs-item-p">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sit convallis nunc neque, bibendum pulvinar vitae commodo velit. Proin diam tortor sed malesuada nunc, habitant. Dignissim ipsum porta enim, magna urna, quam. 
          </p>
        </li>
        <li class="cs-faq-item">
          <button class="cs-button">
            <span class="cs-button-text">
              What Do Lawyers Do? Do They Spend Most of Their Time Arguing Cases in Court?
            </span>
          </button>
          <p class="cs-item-p">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sit convallis nunc neque, bibendum pulvinar vitae commodo velit. Proin diam tortor sed malesuada nunc, habitant. Dignissim ipsum porta enim, magna urna, quam. 
          </p>
        </li>
        <li class="cs-faq-item">
          <button class="cs-button">
            <span class="cs-button-text">
              May a Lawyer Who Is Licensed in One State Practice Law in Another State?
            </span>
          </button>
          <p class="cs-item-p">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sit convallis nunc neque, bibendum pulvinar vitae commodo velit. Proin diam tortor sed malesuada nunc, habitant. Dignissim ipsum porta enim, magna urna, quam. 
          </p>
        </li>
      </ul>
    </div>
  </div>
</section>

<script>
  // Function to initialize FAQ accordions
  function initFAQ() {
    const faqContainer = document.querySelector(".cs-faq-group");
    if (!faqContainer) return;

    const faqItems = document.querySelectorAll(".cs-faq-item");
    faqItems.forEach(item => {
      // Ensure item is an HTMLElement
      if (item instanceof HTMLElement) {
        const button = item.querySelector('.cs-button');
        if (button) {
          // Add click event listener to the button
          button.addEventListener("click", (e) => {
            e.preventDefault();
            e.stopPropagation();
            
            // Get all FAQ items again to ensure we have the current state
            const allItems = document.querySelectorAll(".cs-faq-item");
            
            // Close all other items
            allItems.forEach(otherItem => {
              if (otherItem !== item && otherItem.classList.contains('active')) {
                otherItem.classList.remove('active');
              }
            });
            
            // Toggle the clicked item
            item.classList.toggle("active");
          });
        }
      }
    });
  }

  // Run on initial page load
  initFAQ();
  
  // Also run when navigating between pages with View Transitions
  document.addEventListener('astro:page-load', initFAQ);
</script>

<style lang="less">
  /* Mobile - 360px */
  @media only screen and (min-width: 0rem) {
    #faq-326 {
      padding: var(--sectionPadding);
      position: relative;

      .cs-container {
        width: 100%;
        /* changes to 1280px at desktop */
        max-width: calc(700rem / 16);
        margin: 2em auto;
        display: flex;
        flex-direction: column;
        align-items: center;
        /* 48px - 64px */
        gap: clamp(3rem, 6vw, 4rem);
      }

      .cs-flex-group {
        width: 100%;
        /* Smaller min-height for mobile */
        min-height: 24rem;
      }

      .cs-content {
        /* set text align to left if content needs to be left aligned */
        text-align: center;
        width: 100%;
        display: flex;
        flex-direction: column;
        /* centers content horizontally, set to flex-start to left align */
        align-items: center;
      }

      .cs-title {
        max-width: 15ch;
        margin: 0 0 (32/16rem);
      }

      .cs-faq-group {
        width: 100%;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
        gap: (12/16rem);
        /* Smaller min-height for mobile */
        min-height: 20rem;
      }

      .cs-faq-item {
        list-style: none;
        width: 100%;
        background-color: #f7f7f7;
        /* clips all corners of the button that overlap the rounded border */
        overflow: hidden;
        border-radius: (12/16rem);
        transition: all 0.3s ease-in-out;

        &.active {
          .cs-button {
            background-color: var(--primary);
            color: var(--secondaryLight);

            &:before {
              background-color: var(--secondaryLight);
              transform: rotate(315deg);
            }

            &:after {
              background-color: var(--secondaryLight);
              transform: rotate(-315deg);
            }
          }

          .cs-item-p {
            max-height: 500px; /* Large enough to fit content */
            /* 20px - 24px top & bottom */
            /* 16px - 24px left & right */
            padding: clamp(1.25rem, 1.3vw, 1.5rem) clamp(1rem, 2vw, 1.5rem);
            opacity: 1;
          }
        }
      }

      .cs-button {
        font-size: calc(16rem / 16);
        line-height: 1.2em;
        text-align: left;
        /* 16px - 20px */
        padding: clamp(1rem, 1.3vw, 1.25rem);
        background-color: #f7f7f7;
        border: none;
        color: var(--headerColor);
        display: block;
        width: 100%;
        position: relative;
        transition: all 0.3s ease-in-out;
      }

      .cs-button:hover {
        cursor: pointer;
      }

      .cs-button:before {
        /* left line */
        content: "";
        width: calc(8rem / 16);
        height: calc(2rem / 16);
        background-color: var(--headerColor);
        opacity: 1;
        border-radius: 50%;
        position: absolute;
        top: 50%;
        right: calc(24rem / 16);
        transform: rotate(45deg);
        transition: transform 0.3s ease-in-out, background-color 0.3s;
      }

      .cs-button:after {
        /* right line */
        content: "";
        width: calc(8rem / 16);
        height: calc(2rem / 16);
        background-color: var(--headerColor);
        opacity: 1;
        border-radius: 50%;
        position: absolute;
        top: 50%;
        right: calc(24rem / 16);
        transform: rotate(-45deg);
        transition: transform 0.3s ease-in-out, background-color 0.3s;
      }

      .cs-item-p {
        margin: 0;
        height: auto;
        max-height: 0;
        padding: 0 clamp(1rem, 2vw, 1.5rem);
        opacity: 0;
        overflow: hidden;
        transition: all 0.3s ease-in-out;
      }
    }
  }

  /* Tablet - 768px */
  @media only screen and (min-width: 48rem) {
    #faq-326 {
      .cs-gallery {
        max-width: (1720/16rem);
      }

      .cs-picture {
        grid-column: span 1;
      }

      .cs-flex-group {
        min-height: 28rem;
      }

      .cs-faq-group {
        min-height: 24rem;
      }
    }
  }

  /* Desktop - 1024px */
  @media only screen and (min-width: 64rem) {
    #faq-326 {
      .cs-container {
        max-width: (1280/16rem);
        flex-direction: row;
        justify-content: space-between;
        align-items: stretch;
      }

      .cs-content {
        text-align: left;
        width: 40%;
        align-items: flex-start;
        /* prevents flexbox from squishing it */
        flex: none;
      }

      .cs-flex-group {
        min-height: 32rem;
      }

      .cs-faq-group {
        min-height: 28rem;
      }
    }
  }

  /* Dark Mode */
  @media only screen and (min-width: 0rem) {
    body.dark-mode {
      #faq-326 {
        .cs-title,
        .cs-item-p {
          color: var(--bodyTextColorWhite);
        }

        .cs-topper {
          color: var(--primaryLight);
        }

        .cs-faq-item {
          &.active {
            .cs-button {
              background-color: var(--secondary);
              color: var(--bodyTextColorWhite);

              &:before,
              &:after {
                background-color: var(--bodyTextColorWhite);
              }
            }

            .cs-item-p {
              /* 20px - 24px */
              padding-top: clamp(1.25rem, 1.3vw, 1.5rem);
              border-color: var(--accent);
            }
          }
        }

        .cs-button {
          color: var(--bodyTextColorWhite);
          border-color: var(--accent);

          &:before,
          &:after {
            background-color: var(--bodyTextColorWhite);
          }
        }
      }
    }
  }
</style>
